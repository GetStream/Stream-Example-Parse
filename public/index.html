<!doctype html>
<head>
	<meta charset="utf-8">

	<title>My Parse App</title>
	<meta name="description" content="My Parse App">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="dist/styles/screen.css">
	<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.1.min.js"></script>
	<script src="dist/scripts/libs.js"></script>
	<script src="dist/scripts/main.js"></script>
	<script src="dist/scripts/templates.js"></script>
	<script>
		if (document.location.protocol == 'file:') {
			document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')
		}
	</script>
</head>

<body>

	<div id="main">

	</div>

	<script type="text/javascript">
		Parse.initialize("jybMJ0LPeOwp0dZZPDIeqw7Pjp9qyt6RBH2fekGe", "atz5SiuIdVklUx7T0YZXQ9pLIzS5WehDKojrIdG6");
		StreamClient = stream.connect('hdhuew2dzq5k', null, '738');
		require(['app']);
		
		Activity = Parse.Object.extend("Activity");
		Follow = Activity.extend("Follow");
		Tweet = Activity.extend("Tweet");
		Picture = Activity.extend("Picture");
		Like = Activity.extend("Like");

		q = new Parse.Query(Parse.User);
		q.limit(10);
		q.find(function(users) {
			window.users = users;
			var firstUser = users[0];
			users = [];
			$(users).each(function(index, user) {
				console.log(user.get('username'), user.get('email'));
				follow = new Follow();
				follow.save({
					actor : 1,
					verb : 'follow',
					object : 1,
					target : 1,
					user : user.id,
					target_user : firstUser.id
				}, {
					success : function(object) {
						console.log('saved follow');
					},
					error : function(model, error) {
						console.log('error follow');
					}
				});
			});
		});

	</script>
</body>

</html>
